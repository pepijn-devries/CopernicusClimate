<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Downloading from Copernicus Climate Service • CopernicusClimate</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Downloading from Copernicus Climate Service">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CopernicusClimate</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/download.html">Downloading from Copernicus Climate Service</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pepijn-devries/CopernicusMarine/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Downloading from Copernicus Climate Service</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pepijn-devries/CopernicusMarine/blob/main/vignettes/download.Rmd" class="external-link"><code>vignettes/download.Rmd</code></a></small>
      <div class="d-none name"><code>download.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>When obtaining data from Copernicus Climate Data Service you cannot
download the data directly. You need to know which data you want, submit
a request for a specific dataset. Wait for your request to complete, and
if successful, download the data. The <code>CopernicusClimate</code>
package has functions to facilitate this process. This vignette will
walk you through the different steps to download data.</p>
<ul>
<li><a href="#finding-datasets">Finding datasets</a></li>
<li><a href="#specifying-a-request">Requesting a dataset</a></li>
<li><a href="#tracking-submitted-requests">Tracking submitted
requests</a></li>
<li><a href="#downloading-data">Download data</a></li>
</ul>
<p>But before you can even get started, there are some things you have
to prepare first, as explained in the following section.</p>
</div>
<div class="section level2">
<h2 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h2>
<div class="section level3">
<h3 id="access-token">Access token<a class="anchor" aria-label="anchor" href="#access-token"></a>
</h3>
<p>This R package is built around the Application Programming Interface
(API) provided by C3S. Many of the features of this API require to
identify yourself, for which a ‘key’ or API token is used. You can get
one by creating an account at <a href="https://cds.climate.copernicus.eu/profile" class="external-link uri">https://cds.climate.copernicus.eu/profile</a>.</p>
<p>Once you have an account you can generate (or refresh) an API key.
You can use this token by means of the <code>token</code> argument in
many of the functions of this package. But rather then providing the key
separately each time, you can use the key throughout your R session by
setting it once with <code><a href="../reference/cds_get_token.html">cds_set_token()</a></code>.</p>
<p>However, if you want to share your work, it is not very secure to
keep your strictly personal key hard coded in your script. Furthermore,
setting the key with <code><a href="../reference/cds_get_token.html">cds_set_token()</a></code> does not persist
across sessions. Instead, you could set it as an option in your
<code>.rprofile</code> file, or as a environmental variable on your
system. In both cases the variable should be named
<code>CDSAPI_KEY</code>. This variable is automatically picked up by
<code><a href="../reference/cds_get_token.html">cds_get_token()</a></code> and you don’t have to specify it anywhere
in your script.</p>
<p>You can check if your token works with
<code><a href="../reference/cds_check_authentication.html">cds_token_works()</a></code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pepijn-devries.github.io/CopernicusClimate/">CopernicusClimate</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span></span>
<span>  <span class="st">"The machine that rendered this vignette "</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/cds_check_authentication.html">cds_token_works</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"has"</span>, <span class="st">"does not have"</span><span class="op">)</span>,</span>
<span>  <span class="st">" a working token"</span><span class="op">)</span></span>
<span><span class="co">#&gt; The machine that rendered this vignette has a working token</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="licences">Licences<a class="anchor" aria-label="anchor" href="#licences"></a>
</h3>
<p>In order to download datasets you need to accept its accompanying
licence. You can use <code><a href="../reference/cds_dataset_form.html">cds_dataset_form()</a></code> to inspect under
which licence a dataset is provided, like so:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">licence_info</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/cds_dataset_form.html">cds_dataset_form</a></span><span class="op">(</span><span class="st">"reanalysis-era5-pressure-levels"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op">==</span> <span class="st">"licences"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">licence_info</span> <span class="op">&lt;-</span> <span class="va">licence_info</span><span class="op">$</span><span class="va">details</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">details</span><span class="op">$</span><span class="va">licences</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">licence_info</span><span class="op">)</span></span>
<span><span class="co">#&gt; $id</span></span>
<span><span class="co">#&gt; [1] "cc-by"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $revision</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $label</span></span>
<span><span class="co">#&gt; [1] "CC-BY licence"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $contents_url</span></span>
<span><span class="co">#&gt; [1] "https://object-store.os-api.cci2.ecmwf.int:443/cci2-prod-catalogue/licences/cc-by/cc-byv1_2b61eb0b42e053566cb9447c1d2847a69a275c095e00fca00bad1bf5326a9432.md"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $attachment_url</span></span>
<span><span class="co">#&gt; [1] "https://spdx.org/licenses/CC-BY-4.0"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $spdx_identifier</span></span>
<span><span class="co">#&gt; [1] "CC-BY-4.0"</span></span></code></pre></div>
<p>You can accept this licence by calling
<code>cds_accept_licence(licence_info$id, licence_info$revision)</code>.
You only need to do this once for every licence. Accepted licences are
stored with your account and can be listed with
<code><a href="../reference/cds_accepted_licences.html">cds_accepted_licences()</a></code>. Without accepting required
licences you cannot submit a successful request for downloading it.</p>
</div>
</div>
<div class="section level2">
<h2 id="finding-datasets">Finding datasets<a class="anchor" aria-label="anchor" href="#finding-datasets"></a>
</h2>
<div class="section level3">
<h3 id="websites">Websites<a class="anchor" aria-label="anchor" href="#websites"></a>
</h3>
<p>If you want a visual interface for exploring available datasets, you
can use your web browser and visit either the <a href="https://cds.climate.copernicus.eu/datasets" class="external-link">Climate Data Store</a>
or <a href="https://cds.climate.copernicus.eu/stac-browser/" class="external-link">STAC
catalogue</a>. Both allow you to navigate through the treasures of
information, and identify which dataset best serves your needs.</p>
</div>
<div class="section level3">
<h3 id="programatically">Programatically<a class="anchor" aria-label="anchor" href="#programatically"></a>
</h3>
<p>You can also use this R package to look for datasets. You could start
by listing them all:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cds_search_datasets.html">cds_list_datasets</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 124 × 16</span></span></span>
<span><span class="co">#&gt;    type       id    stac_version title description keywords license extent      </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Collection deri… 1.0.0        ERA5… <span style="color: #949494;">"</span>ERA5 is t… <span style="color: #949494;">&lt;list&gt;</span>   CC-BY-… <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Collection deri… 1.0.0        ERA5… <span style="color: #949494;">"</span>ERA5 is t… <span style="color: #949494;">&lt;list&gt;</span>   CC-BY-… <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Collection deri… 1.0.0        ERA5… <span style="color: #949494;">"</span>ERA5-Land… <span style="color: #949494;">&lt;list&gt;</span>   CC-BY-… <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Collection ecv-… 1.0.0        Esse… <span style="color: #949494;">"</span>The Essen… <span style="color: #949494;">&lt;list&gt;</span>   CC-BY-… <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Collection deri… 1.0.0        Ther… <span style="color: #949494;">"</span>This data… <span style="color: #949494;">&lt;list&gt;</span>   other   <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Collection sis-… 1.0.0        Agro… <span style="color: #949494;">"</span>This data… <span style="color: #949494;">&lt;list&gt;</span>   CC-BY-… <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Collection rean… 1.0.0        ERA5… <span style="color: #949494;">"</span>ERA5 is t… <span style="color: #949494;">&lt;list&gt;</span>   CC-BY-… <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Collection rean… 1.0.0        ERA5… <span style="color: #949494;">"</span>ERA5-Land… <span style="color: #949494;">&lt;list&gt;</span>   CC-BY-… <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Collection rean… 1.0.0        ERA5… <span style="color: #949494;">"</span>ERA5-Land… <span style="color: #949494;">&lt;list&gt;</span>   CC-BY-… <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Collection sate… 1.0.0        Sea … <span style="color: #949494;">"</span>This data… <span style="color: #949494;">&lt;list&gt;</span>   other   <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 114 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: links &lt;list&gt;, assets &lt;named list&gt;, published &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   updated &lt;chr&gt;, `sci:doi` &lt;chr&gt;, `cads:disabled_reason` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `cads:sanity_check` &lt;list&gt;, `cads:message` &lt;list&gt;</span></span></span></code></pre></div>
<p>But you can also look for specific datasets using free search text
and / or predefined keywords:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cds_search_datasets.html">cds_search_datasets</a></span><span class="op">(</span>search <span class="op">=</span> <span class="st">"rain"</span>, keywords <span class="op">=</span> <span class="st">"Temporal coverage: Future"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 15</span></span></span>
<span><span class="co">#&gt;   type       id     stac_version title description keywords license extent      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Collection proje… 1.0.0        CMIP… <span style="color: #949494;">"</span>This cata… <span style="color: #949494;">&lt;list&gt;</span>   other   <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Collection sis-e… 1.0.0        Clim… <span style="color: #949494;">"</span>The Pan-E… <span style="color: #949494;">&lt;list&gt;</span>   other   <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Collection sis-e… 1.0.0        Clim… <span style="color: #949494;">"</span>This data… <span style="color: #949494;">&lt;list&gt;</span>   CC-BY-… <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Collection sis-h… 1.0.0        Temp… <span style="color: #949494;">"</span>This data… <span style="color: #949494;">&lt;list&gt;</span>   CC-BY-… <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Collection sis-e… 1.0.0        Esse… <span style="color: #949494;">"</span>This data… <span style="color: #949494;">&lt;list&gt;</span>   other   <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Collection sis-t… 1.0.0        Moun… <span style="color: #949494;">"</span>This data… <span style="color: #949494;">&lt;list&gt;</span>   CC-BY-… <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Collection sis-e… 1.0.0        Clim… <span style="color: #949494;">"</span>This data… <span style="color: #949494;">&lt;list&gt;</span>   CC-BY-… <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> Collection proje… 1.0.0        CMIP… <span style="color: #949494;">"</span>This cata… <span style="color: #949494;">&lt;list&gt;</span>   other   <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> Collection proje… 1.0.0        CORD… <span style="color: #949494;">"</span>This cata… <span style="color: #949494;">&lt;list&gt;</span>   other   <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 7 more variables: links &lt;list&gt;, assets &lt;named list&gt;, published &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   updated &lt;chr&gt;, `sci:doi` &lt;chr&gt;, `cads:disabled_reason` &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `cads:sanity_check` &lt;list&gt;</span></span></span></code></pre></div>
<p>Use <code><a href="../reference/cds_catalogue_vocabulary.html">cds_catalogue_vocabulary()</a></code> to list available
predefined keywords.</p>
<p>You will see that either approach results in a
<code>data.frame</code> with a column named <code>id</code>. You can use
this <code>id</code> to refer to when setting up a request for
download.</p>
</div>
<div class="section level3">
<h3 id="favourite-datasets">Favourite datasets<a class="anchor" aria-label="anchor" href="#favourite-datasets"></a>
</h3>
<p>You can also mark your favourite datasets with a star using
<code><a href="../reference/cds_starred.html">cds_assign_star()</a></code>. You can get list your favourite datasets
with <code><a href="../reference/cds_starred.html">cds_starred()</a></code>. This makes it easier to find datasets
you use a lot. You can remove a star with
<code><a href="../reference/cds_starred.html">cds_remove_star()</a></code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="specifying-a-request">Specifying a request<a class="anchor" aria-label="anchor" href="#specifying-a-request"></a>
</h2>
<p>In many cases you cannot download an entire dataset at once, because
it it too large. This means you have to specify a subset that you want
to have.</p>
<div class="section level3">
<h3 id="what-are-my-options">What are my options?<a class="anchor" aria-label="anchor" href="#what-are-my-options"></a>
</h3>
<p>How do you know what options you have to subset a dataset? These
options differ for each dataset, so there is no straightforward answer.
However, you can inspect what options you have for a specific dataset.
You can start by obtaining the <code><a href="../reference/cds_dataset_form.html">cds_dataset_form()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataset_form</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/cds_dataset_form.html">cds_dataset_form</a></span><span class="op">(</span><span class="st">"reanalysis-era5-pressure-levels"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dataset_form</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 13 × 9</span></span></span>
<span><span class="co">#&gt;    name            label      required css   type  id    help  details  children</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> product_type    Product t… TRUE     todo  Stri… prod… <span style="color: #BB0000;">NA</span>    <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> variable        Variable   TRUE     todo  Stri… vari… Plea… <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> year            Year       TRUE     todo  Stri… year  <span style="color: #BB0000;">NA</span>    <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> month           Month      TRUE     todo  Stri… month <span style="color: #BB0000;">NA</span>    <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> day             Day        TRUE     todo  Stri… day   <span style="color: #BB0000;">NA</span>    <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> time            Time       TRUE     todo  Stri… time  UTC … <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> pressure_level  Pressure … TRUE     todo  Stri… pres… <span style="color: #BB0000;">NA</span>    <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> area_group      Geographi… <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>    Excl… area… Sele… <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> global          Whole ava… <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>    Free… glob… <span style="color: #BB0000;">NA</span>    <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> area            Sub-regio… <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>    Geog… area  Sele… <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> data_format     Data form… TRUE     todo  Stri… data… Sele… <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> download_format Download … TRUE     todo  Stri… down… If y… <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> licences        Terms of … <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>    Lice… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span></span></span></code></pre></div>
<p>This results in a <code>data.frame</code> listing which aspects of a
dataset you can select from. Each row represents an aspect (except for
the row with the <code>name</code> <code>"licences"</code>). The column
<code>details</code> contains information about the available values.
You could for instance look at the possible values for the
<code>pressure_level</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">values</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">dataset_form</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op">==</span> <span class="st">"pressure_level"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="st">"details"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">values</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">details</span><span class="op">$</span><span class="va">values</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "1"    "2"    "3"    "5"    "7"    "10"   "20"   "30"   "50"   "70"  </span></span>
<span><span class="co">#&gt; [11] "100"  "125"  "150"  "175"  "200"  "225"  "250"  "300"  "350"  "400" </span></span>
<span><span class="co">#&gt; [21] "450"  "500"  "550"  "600"  "650"  "700"  "750"  "775"  "800"  "825" </span></span>
<span><span class="co">#&gt; [31] "850"  "875"  "900"  "925"  "950"  "975"  "1000"</span></span></code></pre></div>
<p>Using this information you can start building your request using
<code><a href="../reference/cds_build_request.html">cds_build_request()</a></code>. You can start by just specifying your
dataset:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">request</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cds_build_request.html">cds_build_request</a></span><span class="op">(</span><span class="st">"reanalysis-era5-pressure-levels"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">request</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 Length Class  Mode     </span></span>
<span><span class="co">#&gt; product_type     1     -none- character</span></span>
<span><span class="co">#&gt; variable        16     -none- list     </span></span>
<span><span class="co">#&gt; year            86     -none- list     </span></span>
<span><span class="co">#&gt; month           12     -none- list     </span></span>
<span><span class="co">#&gt; day             31     -none- list     </span></span>
<span><span class="co">#&gt; time            24     -none- list     </span></span>
<span><span class="co">#&gt; pressure_level  37     -none- list     </span></span>
<span><span class="co">#&gt; data_format      1     -none- character</span></span>
<span><span class="co">#&gt; download_format  1     -none- character</span></span></code></pre></div>
<p>The function <code><a href="../reference/cds_build_request.html">cds_build_request()</a></code> will automatically add
all required parameters to the request and fills it with either their
default value, if available, or all allowed values otherwise. The
request built above will ask for the complete dataset in the default
product type, plus data and download format. As I will explain in the
following section, this request will fail for most users. So let’s
narrow it down:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">request</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cds_build_request.html">cds_build_request</a></span><span class="op">(</span></span>
<span>  <span class="st">"reanalysis-era5-pressure-levels"</span>,</span>
<span>  variable       <span class="op">=</span> <span class="st">"temperature"</span>,</span>
<span>  pressure_level <span class="op">=</span> <span class="st">"1000"</span>,</span>
<span>  year           <span class="op">=</span> <span class="st">"2025"</span>,</span>
<span>  month          <span class="op">=</span> <span class="st">"01"</span>,</span>
<span>  day            <span class="op">=</span> <span class="st">"01"</span>,</span>
<span>  area           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">60</span>, w <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, e <span class="op">=</span> <span class="fl">10</span>, s <span class="op">=</span> <span class="fl">40</span><span class="op">)</span>,</span>
<span>  data_format    <span class="op">=</span> <span class="st">"netcdf"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">request</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 Length Class  Mode     </span></span>
<span><span class="co">#&gt; variable         1     -none- list     </span></span>
<span><span class="co">#&gt; pressure_level   1     -none- list     </span></span>
<span><span class="co">#&gt; year             1     -none- list     </span></span>
<span><span class="co">#&gt; month            1     -none- list     </span></span>
<span><span class="co">#&gt; day              1     -none- list     </span></span>
<span><span class="co">#&gt; area             4     -none- numeric  </span></span>
<span><span class="co">#&gt; data_format      1     -none- character</span></span>
<span><span class="co">#&gt; product_type     1     -none- character</span></span>
<span><span class="co">#&gt; time            24     -none- list     </span></span>
<span><span class="co">#&gt; download_format  1     -none- character</span></span></code></pre></div>
<p>This looks like a reasonable request.</p>
</div>
<div class="section level3">
<h3 id="how-much-can-i-get">How much can I get?<a class="anchor" aria-label="anchor" href="#how-much-can-i-get"></a>
</h3>
<p>As mentioned before, the amount of data that can be requested for
each download is restricted. In order to test how much a request would
cost you can call <code><a href="../reference/cds_estimate_costs.html">cds_estimate_costs()</a></code>. Using the example
above, if you want to download the full dataset, the estimated costs are
as follows:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="../reference/cds_check_authentication.html">cds_token_works</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/cds_estimate_costs.html">cds_estimate_costs</a></span><span class="op">(</span><span class="st">"reanalysis-era5-pressure-levels"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"You need a working token to estimate costs"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; $id</span></span>
<span><span class="co">#&gt; [1] "size"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $cost</span></span>
<span><span class="co">#&gt; [1] 446301696</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $limit</span></span>
<span><span class="co">#&gt; [1] 60000</span></span></code></pre></div>
<p>In this example the costs exceed the limit, such that this request
will fail. If we estimate the costs for the more restricted request, we
get:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="../reference/cds_check_authentication.html">cds_token_works</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/cds_estimate_costs.html">cds_estimate_costs</a></span><span class="op">(</span></span>
<span>    <span class="st">"reanalysis-era5-pressure-levels"</span>,</span>
<span>    variable       <span class="op">=</span> <span class="st">"temperature"</span>,</span>
<span>    pressure_level <span class="op">=</span> <span class="st">"1000"</span>,</span>
<span>    year           <span class="op">=</span> <span class="st">"2025"</span>,</span>
<span>    month          <span class="op">=</span> <span class="st">"01"</span>,</span>
<span>    day            <span class="op">=</span> <span class="st">"01"</span>,</span>
<span>    area           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">60</span>, w <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, e <span class="op">=</span> <span class="fl">10</span>, s <span class="op">=</span> <span class="fl">40</span><span class="op">)</span>,</span>
<span>    data_format    <span class="op">=</span> <span class="st">"netcdf"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"You need a working token to estimate costs"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; $id</span></span>
<span><span class="co">#&gt; [1] "size"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $cost</span></span>
<span><span class="co">#&gt; [1] 144</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $limit</span></span>
<span><span class="co">#&gt; [1] 60000</span></span></code></pre></div>
<p>This is a request that we can afford.</p>
</div>
</div>
<div class="section level2">
<h2 id="submitting-a-request">Submitting a request<a class="anchor" aria-label="anchor" href="#submitting-a-request"></a>
</h2>
<p>Once you have established which dataset you want to download and how
you wish to subset it, you can submit a request to C3S. Let’s submit the
request as shown above:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="../reference/cds_check_authentication.html">cds_token_works</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">job</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="../reference/cds_submit_job.html">cds_submit_job</a></span><span class="op">(</span></span>
<span>      <span class="st">"reanalysis-era5-pressure-levels"</span>,</span>
<span>      variable       <span class="op">=</span> <span class="st">"temperature"</span>,</span>
<span>      pressure_level <span class="op">=</span> <span class="st">"1000"</span>,</span>
<span>      year           <span class="op">=</span> <span class="st">"2025"</span>,</span>
<span>      month          <span class="op">=</span> <span class="st">"01"</span>,</span>
<span>      day            <span class="op">=</span> <span class="st">"01"</span>,</span>
<span>      area           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">60</span>, w <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, e <span class="op">=</span> <span class="fl">10</span>, s <span class="op">=</span> <span class="fl">40</span><span class="op">)</span>,</span>
<span>      data_format    <span class="op">=</span> <span class="st">"netcdf"</span><span class="op">)</span></span>
<span>  <span class="va">job</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"You need a working token to submit a request"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 10</span></span></span>
<span><span class="co">#&gt;   processID           type  jobID status created started finished updated links </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> reanalysis-era5-pr… proc… 5f17… succe… 2025-1… 2025-1… 2025-10… 2025-1… <span style="color: #949494;">&lt;list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: metadata &lt;list&gt;</span></span></span></code></pre></div>
<p>By default this function will wait until the request has been
processed by C3S. But when you set the argument
<code>wait = FALSE</code>, the function will return immediately. In that
case, you can submit multiple jobs where you don’t have to wait for each
individual request to complete.</p>
</div>
<div class="section level2">
<h2 id="tracking-submitted-requests">Tracking submitted requests<a class="anchor" aria-label="anchor" href="#tracking-submitted-requests"></a>
</h2>
<p>When submitting a request and choose not to wait for it to complete,
you may want to track the progress of your request. You can use
<code><a href="../reference/cds_list_jobs.html">cds_list_jobs()</a></code> to list all your submitted jobs. If you
want the status of a specific job, you can use its identifier (id). You
were sent this id when you submitted it earlier. So we can have a look
at the status of our job submitted above:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="../reference/cds_check_authentication.html">cds_token_works</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/cds_list_jobs.html">cds_list_jobs</a></span><span class="op">(</span><span class="va">job</span><span class="op">$</span><span class="va">jobID</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"You need a working token to get a job status"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 10</span></span></span>
<span><span class="co">#&gt;   processID           type  jobID status created started finished updated links </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> reanalysis-era5-pr… proc… 5f17… succe… 2025-1… 2025-1… 2025-10… 2025-1… <span style="color: #949494;">&lt;list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: metadata &lt;list&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="downloading-data">Downloading data<a class="anchor" aria-label="anchor" href="#downloading-data"></a>
</h2>
<p>Now that we have submitted the request we can download it (if it is
completed successfully) with <code><a href="../reference/cds_download_jobs.html">cds_download_jobs()</a></code>. If you
don’t specify a job identifier, it will download all (previously
submitted) successful jobs. You can also download one or more specific
jobs. Note that this function will use parallel downloads which should
give you some performance advantage when downloading multiple jobs. For
now let’s try to download the submitted job:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">filename</span> <span class="op">&lt;-</span> <span class="st">"result.nc"</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="../reference/cds_check_authentication.html">cds_token_works</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">file_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cds_download_jobs.html">cds_download_jobs</a></span><span class="op">(</span><span class="va">job</span><span class="op">$</span><span class="va">jobID</span>, <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">filename</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Downloading data only works with a valid token"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Now you can do whatever it is you want to do with the data:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">filename</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/stars/" class="external-link">stars</a></span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/stars/reference/mdim.html" class="external-link">read_mdim</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/stars/reference/geom_stars.html" class="external-link">geom_stars</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">result</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/strptime.html" class="external-link">strftime</a></span><span class="op">(</span><span class="va">valid_time</span>, <span class="st">"%H:%M"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"turbo"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="cn">NULL</span>, fill <span class="op">=</span> <span class="st">"Temperature [K]"</span><span class="op">)</span></span>
<span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"File wasn't downloaded"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Loading required package: abind</span></span>
<span><span class="co">#&gt; Loading required package: sf</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.12.1, GDAL 3.8.4, PROJ 9.4.0; sf_use_s2() is TRUE</span></span></code></pre></div>
<p><img src="download_files/figure-html/plot-1.png" width="672"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pepijn de Vries.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
